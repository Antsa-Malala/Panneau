drop database panneau;
CREATE DATABASE panneau;
CREATE user panneau WITH PASSWORD 'panneau';
GRANT ALL PRIVILEGES ON DATABASE "panneau" to panneau;
ALTER DATABASE panneau OWNER TO panneau;


create table unite(
    idUnite serial primary key,
    nomUnite varchar(30),
    reference double precision,
    categorie varchar(10)
);

CREATE TABLE Panneau(
    idPanneau serial primary key,
    marquePanneau varchar(50),
    idUnitePanneau int,
    puissancePanneau double precision,
    foreign key(idUnitePanneau) references unite(idUnite)
);

CREATE TABLE Batterie(
    idBatterie serial primary key,
    marqueBatterie varchar(50),
    idUniteBatterie int,
    puissanceBatterie double precision,
    foreign key(idUniteBatterie) references unite(idUnite)
);

CREATE TABLE Source(
    idSource serial primary key,
    nomSource varchar(50),
    idPanneau int,
    idBatterie int,
    foreign key(idPanneau) references Panneau(idPanneau),
    foreign key(idBatterie) references Batterie(idBatterie)
);

/*CREATE TABLE SourcePanneau(
    idSource int,
    idPanneau int,
    foreign key(idSource) references Source(idSource),
    foreign key(idPanneau) references Panneau(idPanneau)
);

CREATE TABLE SourceBatterie(
    idSource int,
    idBatterie int,
    foreign key(idSource) references Source(idSource),
    foreign key(idBatterie) references Batterie(idBatterie)
);

*/

CREATE TABLE Classe(
    idClasse serial primary key,
    nomClasse varchar(50),
    nbTotalPlace int
);

CREATE TABLE SourceClasse(
    idSource int,
    idClasse int,
    foreign key(idSource) references Source(idSource),
    foreign key(idClasse) references Classe(idClasse)
);

CREATE TABLE Presence(
    idClasse int,
    nbeleve double precision,
    datePresence date,
    heureDebut time,
    heureFin time,
    foreign key(idClasse) references Classe(idClasse)
);

CREATE TABLE Luminosite(
    dateLuminosite date,
    luminosite int,
    heureLuminositeDebut time,
    heureLuminositeFin time
);

CREATE TABLE Coupure(
    dateCoupure date,
    idSource int,
    heureCoupure time
);

--------données tes

-- Insertion de données de test dans la table Unite pour des unités d'énergie
INSERT INTO Unite (nomUnite, reference, categorie) VALUES
    ('Kilowatt-heure', 1.0, 'Energie'),
    ('Megajoule', 3.6, 'Energie'),
    ('Calorie', 0.00000116222, 'Energie'),
    ('Btu', 0.000947817, 'Energie'),
    ('Joule', 0.000000277778, 'Energie'),
    ('Watt', 0.001, 'Energie');

-- Insertion de données de test dans la table Panneau avec de vraies marques
INSERT INTO Panneau VALUES
    (default,'SunPower', 6, 25000),
    (default,'LG Solar', 6, 3000.0),
    (default,'Trina Solar', 6, 2700.0),
    (default,'Canadian Solar', 6, 3500.0),
    (default,'JinkoSolar', 6, 2200.0);

-- Insertion de données de test dans la table Batterie avec de vraies marques
INSERT INTO Batterie VALUES
    (default,'Tesla Powerwall', 6, 19200),
    (default,'LG Chem RESU', 6, 980),
    (default,'BYD B-Box', 6, 150),
    (default,'SonnenBatterie', 6, 120),
    (default,'Enphase Encharge', 6, 380);


-- Insertion de données de test dans la table Source
INSERT INTO Source (nomSource, idPanneau, idBatterie) VALUES
    ('Source 1', 7,7),
    ('Source 2', 2, 2),
    ('Source 3', 3, 3);

-- Insertion de données de test dans la table Classe
INSERT INTO Classe (nomClasse, nbTotalPlace) VALUES
    ('S1 Info', 300),
    ('S1 Design', 200),
    ('S3 Info', 200),
    ('S3 Design', 100),
    ('S5 Info', 180),
    ('S5 Design', 90),
    ('Administration', 20);

-- Insertion de données de test dans la table SourceClasse
INSERT INTO SourceClasse (idSource, idClasse) VALUES
    (5, 8);

    (4, 8),
    (1, 2),
    (2, 3),
    (2, 4),
    (3, 5),
    (3, 6),
    (3, 7);

 -- Insertion de données de test dans la table Presence
INSERT INTO Presence (idClasse, nbeleve, datePresence, heureDebut, heureFin) VALUES
    (8, 300, '2023-11-01', '08:00:00', '12:00:00'),
    (8, 280, '2023-11-01', '14:00:00', '17:00:00'),
    (8, 250, '2023-11-02', '08:00:00', '12:00:00'),
    (8, 240, '2023-11-02', '14:00:00', '17:00:00'),
    (8, 220, '2023-11-03', '08:00:00', '12:00:00'),
    (8, 210, '2023-11-03', '14:00:00', '17:00:00'),

    (8, 320, '2023-11-06', '08:00:00', '12:00:00'),
    (8, 330, '2023-11-06', '14:00:00', '17:00:00'),
    (8, 300, '2023-11-07', '08:00:00', '12:00:00'),
    (8, 290, '2023-11-07', '14:00:00', '17:00:00'),
    (8, 300, '2023-11-08', '08:00:00', '12:00:00'),
    (8, 280, '2023-11-08', '14:00:00', '17:00:00'),
    (8, 250, '2023-11-09', '08:00:00', '12:00:00'),
    (8, 240, '2023-11-09', '14:00:00', '17:00:00'),
    (8, 220, '2023-11-10', '08:00:00', '12:00:00'),
    (8, 210, '2023-11-10', '14:00:00', '17:00:00'),

    
    (8, 320, '2023-11-13', '08:00:00', '12:00:00'),
    (8, 330, '2023-11-13', '14:00:00', '17:00:00'),
    (8, 300, '2023-11-14', '08:00:00', '12:00:00'),
    (8, 290, '2023-11-14', '14:00:00', '17:00:00'),
    (8, 300, '2023-11-15', '08:00:00', '12:00:00'),
    (8, 280, '2023-11-15', '14:00:00', '17:00:00'),
    (8, 250, '2023-11-16', '08:00:00', '12:00:00'),
    (8, 240, '2023-11-16', '14:00:00', '17:00:00'),
    (8, 220, '2023-11-17', '08:00:00', '12:00:00'),
    (8, 210, '2023-11-17', '14:00:00', '17:00:00'),
    

    (8, 320, '2023-11-20', '08:00:00', '12:00:00'),
    (8, 330, '2023-11-20', '14:00:00', '17:00:00'),
    (8, 300, '2023-11-21', '08:00:00', '12:00:00'),
    (8, 290, '2023-11-21', '14:00:00', '17:00:00'),
    (8, 300, '2023-11-22', '08:00:00', '12:00:00'),
    (8, 280, '2023-11-22', '14:00:00', '17:00:00'),
    (8, 250, '2023-11-23', '08:00:00', '12:00:00'),
    (8, 240, '2023-11-23', '14:00:00', '17:00:00'),
    (8, 220, '2023-11-24', '08:00:00', '12:00:00'),
    (8, 210, '2023-11-24', '14:00:00', '17:00:00'),

    (8, 320, '2023-11-27', '08:00:00', '12:00:00'),
    (8, 330, '2023-11-27', '14:00:00', '17:00:00'),
    (8, 300, '2023-11-28', '08:00:00', '12:00:00'),
    (8, 290, '2023-11-28', '14:00:00', '17:00:00'),
    (8, 300, '2023-11-29', '08:00:00', '12:00:00'),
    (8, 280, '2023-11-29', '14:00:00', '17:00:00'),
    (8, 250, '2023-11-30', '08:00:00', '12:00:00'),
    (8, 240, '2023-11-30', '14:00:00', '17:00:00'),
    (8, 220, '2023-12-01', '08:00:00', '12:00:00'),
    (8, 210, '2023-12-01', '14:00:00', '17:00:00'),

    (8, 320, '2023-12-04', '08:00:00', '12:00:00'),
    (8, 330, '2023-12-04', '14:00:00', '17:00:00'),
    (8, 300, '2023-12-05', '08:00:00', '12:00:00'),
    (8, 290, '2023-12-05', '14:00:00', '17:00:00'),
    (8, 300, '2023-12-06', '08:00:00', '12:00:00'),
    (8, 280, '2023-12-06', '14:00:00', '17:00:00'),
    (8, 250, '2023-12-07', '08:00:00', '12:00:00'),
    (8, 240, '2023-12-07', '14:00:00', '17:00:00'),
    (8, 220, '2023-12-08', '08:00:00', '12:00:00'),
    (8, 210, '2023-12-08', '14:00:00', '17:00:00'),

    (8, 320, '2023-12-11', '08:00:00', '12:00:00'),
    (8, 330, '2023-12-11', '14:00:00', '17:00:00'),
    (8, 300, '2023-12-12', '08:00:00', '12:00:00'),
    (8, 290, '2023-12-12', '14:00:00', '17:00:00'),
    (8, 300, '2023-12-13', '08:00:00', '12:00:00'),
    (8, 280, '2023-12-13', '14:00:00', '17:00:00');



-- Insertion de données de test dans la table Luminosite
INSERT INTO Luminosite (dateLuminosite, luminosite,heureLuminositeDebut,heureLuminositeFin) VALUES
    ('2023-11-01', 8,'08:00:00','08:59:59'),
    ('2023-11-01', 7,'09:00:00','09:59:59'),
    ('2023-11-01', 9,'10:00:00','10:59:59'),
    ('2023-11-01', 9,'11:00:00','11:59:59'),

    ('2023-11-01', 8,'14:00:00','14:59:59'),
    ('2023-11-01', 7,'15:00:00','15:59:59'),
    ('2023-11-01', 6,'16:00:00','16:59:59'),
    ('2023-11-01', 4,'17:00:00','17:59:59'),

    ('2023-11-02', 8,'08:00:00','08:59:59'),
    ('2023-11-02', 7,'09:00:00','09:59:59'),
    ('2023-11-02', 9,'10:00:00','10:59:59'),
    ('2023-11-02', 9,'11:00:00','11:59:59'),

    ('2023-11-02', 8,'14:00:00','14:59:59'),
    ('2023-11-02', 7,'15:00:00','15:59:59'),
    ('2023-11-02', 6,'16:00:00','16:59:59'),
    ('2023-11-02', 4,'17:00:00','17:59:59'),

    ('2023-11-03', 8,'08:00:00','08:59:59'),
    ('2023-11-03', 7,'09:00:00','09:59:59'),
    ('2023-11-03', 9,'10:00:00','10:59:59'),
    ('2023-11-03', 9,'11:00:00','11:59:59'),

    ('2023-11-03', 8,'14:00:00','14:59:59'),
    ('2023-11-03', 7,'15:00:00','15:59:59'),
    ('2023-11-03', 6,'16:00:00','16:59:59'),
    ('2023-11-03', 4,'17:00:00','17:59:59'),


    ('2023-11-06', 8,'08:00:00','08:59:59'),
    ('2023-11-06', 7,'09:00:00','09:59:59'),
    ('2023-11-06', 9,'10:00:00','10:59:59'),
    ('2023-11-06', 9,'11:00:00','11:59:59'),

    ('2023-11-06', 8,'14:00:00','14:59:59'),
    ('2023-11-06', 7,'15:00:00','15:59:59'),
    ('2023-11-06', 6,'16:00:00','16:59:59'),
    ('2023-11-06', 4,'17:00:00','17:59:59'),

    ('2023-11-07', 8,'08:00:00','08:59:59'),
    ('2023-11-07', 7,'09:00:00','09:59:59'),
    ('2023-11-07', 9,'10:00:00','10:59:59'),
    ('2023-11-07', 9,'11:00:00','11:59:59'),

    ('2023-11-07', 8,'14:00:00','14:59:59'),
    ('2023-11-07', 7,'15:00:00','15:59:59'),
    ('2023-11-07', 6,'16:00:00','16:59:59'),
    ('2023-11-07', 4,'17:00:00','17:59:59'),

    ('2023-11-08', 8,'08:00:00','08:59:59'),
    ('2023-11-08', 7,'09:00:00','09:59:59'),
    ('2023-11-08', 9,'10:00:00','10:59:59'),
    ('2023-11-08', 9,'11:00:00','11:59:59'),

    ('2023-11-08', 8,'14:00:00','14:59:59'),
    ('2023-11-08', 7,'15:00:00','15:59:59'),
    ('2023-11-08', 6,'16:00:00','16:59:59'),
    ('2023-11-08', 4,'17:00:00','17:59:59'),


    ('2023-11-09', 8,'08:00:00','08:59:59'),
    ('2023-11-09', 7,'09:00:00','09:59:59'),
    ('2023-11-09', 9,'10:00:00','10:59:59'),
    ('2023-11-09', 9,'11:00:00','11:59:59'),

    ('2023-11-09', 8,'14:00:00','14:59:59'),
    ('2023-11-09', 7,'15:00:00','15:59:59'),
    ('2023-11-09', 6,'16:00:00','16:59:59'),
    ('2023-11-09', 4,'17:00:00','17:59:59'),

    ('2023-11-10', 8,'08:00:00','08:59:59'),
    ('2023-11-10', 7,'09:00:00','09:59:59'),
    ('2023-11-10', 9,'10:00:00','10:59:59'),
    ('2023-11-10', 9,'11:00:00','11:59:59'),

    ('2023-11-10', 8,'14:00:00','14:59:59'),
    ('2023-11-10', 7,'15:00:00','15:59:59'),
    ('2023-11-10', 6,'16:00:00','16:59:59'),
    ('2023-11-10', 4,'17:00:00','17:59:59'),

    ('2023-11-13', 8,'08:00:00','08:59:59'),
    ('2023-11-13', 7,'09:00:00','09:59:59'),
    ('2023-11-13', 9,'10:00:00','10:59:59'),
    ('2023-11-13', 9,'11:00:00','11:59:59'),

    ('2023-11-13', 8,'14:00:00','14:59:59'),
    ('2023-11-13', 7,'15:00:00','15:59:59'),
    ('2023-11-13', 6,'16:00:00','16:59:59'),
    ('2023-11-13', 4,'17:00:00','17:59:59'),

    ('2023-11-14', 8,'08:00:00','08:59:59'),
    ('2023-11-14', 7,'09:00:00','09:59:59'),
    ('2023-11-14', 9,'10:00:00','10:59:59'),
    ('2023-11-14', 9,'11:00:00','11:59:59'),

    ('2023-11-14', 8,'14:00:00','14:59:59'),
    ('2023-11-14', 7,'15:00:00','15:59:59'),
    ('2023-11-14', 6,'16:00:00','16:59:59'),
    ('2023-11-14', 4,'17:00:00','17:59:59'),

    ('2023-11-15', 8,'08:00:00','08:59:59'),
    ('2023-11-15', 7,'09:00:00','09:59:59'),
    ('2023-11-15', 9,'10:00:00','10:59:59'),
    ('2023-11-15', 9,'11:00:00','11:59:59'),

    ('2023-11-15', 8,'14:00:00','14:59:59'),
    ('2023-11-15', 7,'15:00:00','15:59:59'),
    ('2023-11-15', 6,'16:00:00','16:59:59'),
    ('2023-11-15', 4,'17:00:00','17:59:59'),
    

    ('2023-11-16', 8,'08:00:00','08:59:59'),
    ('2023-11-16', 7,'09:00:00','09:59:59'),
    ('2023-11-16', 9,'10:00:00','10:59:59'),
    ('2023-11-16', 9,'11:00:00','11:59:59'),

    ('2023-11-16', 8,'14:00:00','14:59:59'),
    ('2023-11-16', 7,'15:00:00','15:59:59'),
    ('2023-11-16', 6,'16:00:00','16:59:59'),
    ('2023-11-16', 4,'17:00:00','17:59:59'),

    ('2023-11-17', 8,'08:00:00','08:59:59'),
    ('2023-11-17', 7,'09:00:00','09:59:59'),
    ('2023-11-17', 9,'10:00:00','10:59:59'),
    ('2023-11-17', 9,'11:00:00','11:59:59'),

    ('2023-11-17', 8,'14:00:00','14:59:59'),
    ('2023-11-17', 7,'15:00:00','15:59:59'),
    ('2023-11-17', 6,'16:00:00','16:59:59'),
    ('2023-11-17', 4,'17:00:00','17:59:59'),

    ('2023-11-20', 8,'08:00:00','08:59:59'),
    ('2023-11-20', 7,'09:00:00','09:59:59'),
    ('2023-11-20', 9,'10:00:00','10:59:59'),
    ('2023-11-20', 9,'11:00:00','11:59:59'),

    ('2023-11-20', 8,'14:00:00','14:59:59'),
    ('2023-11-20', 7,'15:00:00','15:59:59'),
    ('2023-11-20', 6,'16:00:00','16:59:59'),
    ('2023-11-20', 4,'17:00:00','17:59:59'),

    ('2023-11-21', 8,'08:00:00','08:59:59'),
    ('2023-11-21', 7,'09:00:00','09:59:59'),
    ('2023-11-21', 9,'10:00:00','10:59:59'),
    ('2023-11-21', 9,'11:00:00','11:59:59'),

    ('2023-11-21', 8,'14:00:00','14:59:59'),
    ('2023-11-21', 7,'15:00:00','15:59:59'),
    ('2023-11-21', 6,'16:00:00','16:59:59'),
    ('2023-11-21', 4,'17:00:00','17:59:59'),

    ('2023-11-22', 8,'08:00:00','08:59:59'),
    ('2023-11-22', 7,'09:00:00','09:59:59'),
    ('2023-11-22', 9,'10:00:00','10:59:59'),
    ('2023-11-22', 9,'11:00:00','11:59:59'),

    ('2023-11-22', 8,'14:00:00','14:59:59'),
    ('2023-11-22', 7,'15:00:00','15:59:59'),
    ('2023-11-22', 6,'16:00:00','16:59:59'),
    ('2023-11-22', 4,'17:00:00','17:59:59'),

    ('2023-11-23', 8,'08:00:00','08:59:59'),
    ('2023-11-23', 7,'09:00:00','09:59:59'),
    ('2023-11-23', 9,'10:00:00','10:59:59'),
    ('2023-11-23', 9,'11:00:00','11:59:59'),

    ('2023-11-23', 8,'14:00:00','14:59:59'),
    ('2023-11-23', 7,'15:00:00','15:59:59'),
    ('2023-11-23', 6,'16:00:00','16:59:59'),
    ('2023-11-23', 4,'17:00:00','17:59:59'),

    ('2023-11-24', 8,'08:00:00','08:59:59'),
    ('2023-11-24', 7,'09:00:00','09:59:59'),
    ('2023-11-24', 9,'10:00:00','10:59:59'),
    ('2023-11-24', 9,'11:00:00','11:59:59'),

    ('2023-11-24', 8,'14:00:00','14:59:59'),
    ('2023-11-24', 7,'15:00:00','15:59:59'),
    ('2023-11-24', 6,'16:00:00','16:59:59'),
    ('2023-11-24', 4,'17:00:00','17:59:59'),

    ('2023-11-27', 8,'08:00:00','08:59:59'),
    ('2023-11-27', 7,'09:00:00','09:59:59'),
    ('2023-11-27', 9,'10:00:00','10:59:59'),
    ('2023-11-27', 9,'11:00:00','11:59:59'),

    ('2023-11-27', 8,'14:00:00','14:59:59'),
    ('2023-11-27', 7,'15:00:00','15:59:59'),
    ('2023-11-27', 6,'16:00:00','16:59:59'),
    ('2023-11-27', 4,'17:00:00','17:59:59'),

    ('2023-11-28', 8,'08:00:00','08:59:59'),
    ('2023-11-28', 7,'09:00:00','09:59:59'),
    ('2023-11-28', 9,'10:00:00','10:59:59'),
    ('2023-11-28', 9,'11:00:00','11:59:59'),

    ('2023-11-28', 8,'14:00:00','14:59:59'),
    ('2023-11-28', 7,'15:00:00','15:59:59'),
    ('2023-11-28', 6,'16:00:00','16:59:59'),
    ('2023-11-28', 4,'17:00:00','17:59:59'),

    ('2023-11-29', 8,'08:00:00','08:59:59'),
    ('2023-11-29', 7,'09:00:00','09:59:59'),
    ('2023-11-29', 9,'10:00:00','10:59:59'),
    ('2023-11-29', 9,'11:00:00','11:59:59'),

    ('2023-11-29', 8,'14:00:00','14:59:59'),
    ('2023-11-29', 7,'15:00:00','15:59:59'),
    ('2023-11-29', 6,'16:00:00','16:59:59'),
    ('2023-11-29', 4,'17:00:00','17:59:59'),

    ('2023-11-30', 8,'08:00:00','08:59:59'),
    ('2023-11-30', 7,'09:00:00','09:59:59'),
    ('2023-11-30', 9,'10:00:00','10:59:59'),
    ('2023-11-30', 9,'11:00:00','11:59:59'),

    ('2023-11-30', 8,'14:00:00','14:59:59'),
    ('2023-11-30', 7,'15:00:00','15:59:59'),
    ('2023-11-30', 6,'16:00:00','16:59:59'),
    ('2023-11-30', 4,'17:00:00','17:59:59'),

    ('2023-12-01', 8,'08:00:00','08:59:59'),
    ('2023-12-01', 7,'09:00:00','09:59:59'),
    ('2023-12-01', 9,'10:00:00','10:59:59'),
    ('2023-12-01', 9,'11:00:00','11:59:59'),

    ('2023-12-01', 8,'14:00:00','14:59:59'),
    ('2023-12-01', 7,'15:00:00','15:59:59'),
    ('2023-12-01', 6,'16:00:00','16:59:59'),
    ('2023-12-01', 4,'17:00:00','17:59:59'),

    ('2023-12-04', 8,'08:00:00','08:59:59'),
    ('2023-12-04', 7,'09:00:00','09:59:59'),
    ('2023-12-04', 9,'10:00:00','10:59:59'),
    ('2023-12-04', 9,'11:00:00','11:59:59'),

    ('2023-12-04', 8,'14:00:00','14:59:59'),
    ('2023-12-04', 7,'15:00:00','15:59:59'),
    ('2023-12-04', 6,'16:00:00','16:59:59'),
    ('2023-12-04', 4,'17:00:00','17:59:59'),

    ('2023-12-05', 8,'08:00:00','08:59:59'),
    ('2023-12-05', 7,'09:00:00','09:59:59'),
    ('2023-12-05', 9,'10:00:00','10:59:59'),
    ('2023-12-05', 9,'11:00:00','11:59:59'),

    ('2023-12-05', 8,'14:00:00','14:59:59'),
    ('2023-12-05', 7,'15:00:00','15:59:59'),
    ('2023-12-05', 6,'16:00:00','16:59:59'),
    ('2023-12-05', 4,'17:00:00','17:59:59'),

    ('2023-12-06', 8,'08:00:00','08:59:59'),
    ('2023-12-06', 7,'09:00:00','09:59:59'),
    ('2023-12-06', 9,'10:00:00','10:59:59'),
    ('2023-12-06', 9,'11:00:00','11:59:59'),

    ('2023-12-06', 8,'14:00:00','14:59:59'),
    ('2023-12-06', 7,'15:00:00','15:59:59'),
    ('2023-12-06', 6,'16:00:00','16:59:59'),
    ('2023-12-06', 4,'17:00:00','17:59:59'),

    ('2023-12-07', 8,'08:00:00','08:59:59'),
    ('2023-12-07', 7,'09:00:00','09:59:59'),
    ('2023-12-07', 9,'10:00:00','10:59:59'),
    ('2023-12-07', 9,'11:00:00','11:59:59'),

    ('2023-12-07', 8,'14:00:00','14:59:59'),
    ('2023-12-07', 7,'15:00:00','15:59:59'),
    ('2023-12-07', 6,'16:00:00','16:59:59'),
    ('2023-12-07', 4,'17:00:00','17:59:59'),

    ('2023-12-08', 8,'08:00:00','08:59:59'),
    ('2023-12-08', 7,'09:00:00','09:59:59'),
    ('2023-12-08', 9,'10:00:00','10:59:59'),
    ('2023-12-08', 9,'11:00:00','11:59:59'),

    ('2023-12-08', 8,'14:00:00','14:59:59'),
    ('2023-12-08', 7,'15:00:00','15:59:59'),
    ('2023-12-08', 6,'16:00:00','16:59:59'),
    ('2023-12-08', 4,'17:00:00','17:59:59'),

    ('2023-12-11', 8,'08:00:00','08:59:59'),
    ('2023-12-11', 7,'09:00:00','09:59:59'),
    ('2023-12-11', 9,'10:00:00','10:59:59'),
    ('2023-12-11', 9,'11:00:00','11:59:59'),

    ('2023-12-11', 8,'14:00:00','14:59:59'),
    ('2023-12-11', 7,'15:00:00','15:59:59'),
    ('2023-12-11', 6,'16:00:00','16:59:59'),
    ('2023-12-11', 4,'17:00:00','17:59:59'),

    ('2023-12-12', 8,'08:00:00','08:59:59'),
    ('2023-12-12', 7,'09:00:00','09:59:59'),
    ('2023-12-12', 9,'10:00:00','10:59:59'),
    ('2023-12-12', 9,'11:00:00','11:59:59'),

    ('2023-12-12', 8,'14:00:00','14:59:59'),
    ('2023-12-12', 7,'15:00:00','15:59:59'),
    ('2023-12-12', 6,'16:00:00','16:59:59'),
    ('2023-12-12', 4,'17:00:00','17:59:59'),

    ('2023-12-13', 8,'08:00:00','08:59:59'),
    ('2023-12-13', 7,'09:00:00','09:59:59'),
    ('2023-12-13', 9,'10:00:00','10:59:59'),
    ('2023-12-13', 9,'11:00:00','11:59:59'),

    ('2023-12-13', 8,'14:00:00','14:59:59'),
    ('2023-12-13', 7,'15:00:00','15:59:59'),
    ('2023-12-13', 6,'16:00:00','16:59:59'),
    ('2023-12-13', 4,'17:00:00','17:59:59');

--Prevision
INSERT INTO Luminosite (dateLuminosite, luminosite,heureLuminositeDebut,heureLuminositeFin) VALUES
    ('2024-01-03', 9,'08:00:00','08:59:59'),
    ('2024-01-03', 9,'09:00:00','09:59:59'),
    ('2024-01-03', 9,'10:00:00','10:59:59'),
    ('2024-01-03', 9,'11:00:00','11:59:59'),
    ('2024-01-03', 8,'14:00:00','14:59:59'),
    ('2024-01-03', 8,'15:00:00','15:59:59'),
    ('2024-01-03', 8,'16:00:00','16:59:59'),
    ('2024-01-03', 9,'17:00:00','17:59:59');


    

-- Insertion de données de test dans la table Coupure
INSERT INTO Coupure (dateCoupure, idSource, heureCoupure) VALUES
    ('2023-11-01', 5, '15:45:00'),
    ('2023-11-02', 5, '16:30:00'),
    ('2023-11-03', 5, '17:00:00'),

    ('2023-11-06', 5, '15:00:00'),
    ('2023-11-07', 5, '15:40:00'),
    ('2023-11-08', 5, '15:45:00'),
    ('2023-11-09', 5, '16:29:00'),
    ('2023-11-10', 5, '17:01:00'),

    ('2023-11-13', 5, '15:02:00'),
    ('2023-11-14', 5, '15:42:00'),
    ('2023-11-15', 5, '15:43:00'),  
    ('2023-11-16', 5, '16:32:00'),  
    ('2023-11-17', 5, '17:03:00'),  

    ('2023-11-20', 5, '14:55:00'),  
    ('2023-11-21', 5, '15:35:00'),  
    ('2023-11-22', 5, '15:40:00'),  
    ('2023-11-23', 5, '16:24:00'),  
    ('2023-11-24', 5, '16:55:00'),  

    ('2023-11-27', 5, '15:04:00'),  
    ('2023-11-28', 5, '15:44:00'),  
    ('2023-11-29', 5, '15:49:00'),  
    ('2023-11-30', 5, '16:33:00'),  
    ('2023-12-01', 5, '17:06:00'),  

    ('2023-12-04', 5, '14:59:00'),  
    ('2023-12-05', 5, '15:39:00'),  
    ('2023-12-06', 5, '15:44:00'),  
    ('2023-12-07', 5, '16:28:00'),  
    ('2023-12-08', 5, '17:00:00'),  

    ('2023-12-11', 5, '15:46:00'),  
    ('2023-12-12', 5, '16:32:00'),  
    ('2023-12-13', 5, '17:01:00');








--------------requete pour les jours
select * from presence where extract(dow from datePresence::date)=3; ----mercredi


----------------------------view
create or replace view v_SourceClasse as 
select classe.*,sourceClasse.idSource 
from SourceClasse 
join classe on classe.idClasse=sourceClasse.idClasse;

create or replace view v_source as
select s.idsource,b.*,p.* 
from source as s 
join batterie as b on b.idBatterie=s.idbatterie 
join panneau as p on p.idpanneau=s.idpanneau;
